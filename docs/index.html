---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://github.com/MannLabs/alphapept/workflows/CI/badge.svg" alt="CI">
<img src="https://github.com/MannLabs/alphapept/workflows/Quick%20Test/badge.svg" alt="Quick Test">
<img src="https://github.com/MannLabs/alphapept/workflows/Performance%20test/badge.svg" alt="Performance test">
<img src="https://github.com/MannLabs/alphapept/workflows/Windows%20Installer/badge.svg" alt="Windows Installer"></p>
<h1 id="AlphaPept">AlphaPept<a class="anchor-link" href="#AlphaPept"> </a></h1><p>{% include image.html align="center" file="/images/alphapept_logo.png" %}</p>
<blockquote><p>A modular, python-based framework to analyze mass spectrometry data. Powered by nbdev. Supercharged with numba.</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Documentation">Documentation<a class="anchor-link" href="#Documentation"> </a></h2><p>The documentation is automatically built based on the jupyter notebooks (nbs/index.ipynb) and can be found <a href="https://mannlabs.github.io/alphapept/">here</a>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Windows-Quickstart">Windows Quickstart<a class="anchor-link" href="#Windows-Quickstart"> </a></h2><p>{% include image.html width="480," align="center" max-width="480," file="/images/alphapept_screen.png" %}</p>
<ol>
<li>Download the latest installer <a href="https://github.com/MannLabs/alphapept/releases/latest">here</a>, install and click the shortcut on the desktop. A browser window with the AlphaPept interface should open. In case Windows Firewall asks for network access for AlphaPept, please allow.</li>
<li>In the <code>New Experiment</code> select a folder with raw files and FASTA files.</li>
<li>Specify additional settings such as modifications with <code>Settings</code>.</li>
<li>Click <code>Start</code> and run the analysis. </li>
</ol>
<p>See also below for more detailed instructions.</p>
<h2 id="Current-functionality">Current functionality<a class="anchor-link" href="#Current-functionality"> </a></h2><table>
<thead><tr>
<th>Feature</th>
<th>Implemented</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td>DDA</td>
</tr>
<tr>
<td>Filetypes</td>
<td>Bruker, Thermo</td>
</tr>
<tr>
<td>Quantification</td>
<td>LFQ</td>
</tr>
<tr>
<td>Isobaric labels</td>
<td>None</td>
</tr>
<tr>
<td>Platform</td>
<td>Windows</td>
</tr>
</tbody>
</table>
<h2 id="Installation-Instructions">Installation Instructions<a class="anchor-link" href="#Installation-Instructions"> </a></h2><h3 id="Python">Python<a class="anchor-link" href="#Python"> </a></h3><p>We highly recommend the <a href="https://www.anaconda.com">Anaconda</a> or <a href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a> Python distribution, which comes with a powerful package manager. See below for additional instructions for Linux and Mac as they require additional installation of Mono to use the RawFileReader.</p>
<p>It is strongly recommended to install AlphaPept in its own environment.</p>
<ol>
<li>Open the console and create a new conda environment: <code>conda create --name alphapept python=3.8</code></li>
<li>Activate the environment: <code>conda activate alphapept</code></li>
<li>Redirect to the folder of choice and clone the repository: <code>git clone https://github.com/MannLabs/alphapept.git</code></li>
<li>Navigate to the alphapept folder with <code>cd alphapept</code> and install the package with <code>pip install .</code> (default users) or with <code>pip install -e .</code> to enable developers mode.</li>
<li>To ensure compatibility, install strict requirements with <code>pip install -r requirements.txt</code>.</li>
</ol>
<p>If AlphaPept is installed correctly, you should be able to import Alphapept as a package within the environment; see below.</p>
<h4 id="GPU-Support">GPU Support<a class="anchor-link" href="#GPU-Support"> </a></h4><p>To enable usage of a GPU, additional packages need to be installed. The following instructions are targeted at a more experienced audience.</p>
<ol>
<li>Make sure to have a working <a href="https://developer.nvidia.com/cuda-toolkit">CUDA toolkit</a> installation that is compatible with cupy. To check type <code>nvcc --version</code> in your terminal.</li>
<li>Install <a href="https://cupy.dev">cupy</a>. Make sure to install the cupy version matching your CUDA toolkit (e.g. <code>pip install cupy-cuda110</code> for CUDA toolkit 11.0.</li>
</ol>
<h4 id="Notes">Notes<a class="anchor-link" href="#Notes"> </a></h4><ul>
<li>If you would like to use alphapept in your jupyter notebook environment, additionally install nb_conda: <code>conda install nb_conda</code>, which also installs the jupyter notebook extensions. They can be called from a running jupyter instance like so: <code>http://localhost:8888/nbextensions</code>. </li>
<li>For navigating the notebooks, the exension <code>collapsible headings</code> and <code>toc2</code> are very beneficial.</li>
<li>For developing with the notebooks, see the <code>nbev</code> section below.</li>
</ul>
<h4 id="Linux">Linux<a class="anchor-link" href="#Linux"> </a></h4><ol>
<li>Install the build-essentials: <code>sudo apt-get install build-essential</code>.</li>
<li>Install Mono from mono-project website <a href="https://www.mono-project.com/download/stable/#download-lin">Mono Linux</a>. NOTE, the installed mono version should be at least 6.10, which requires you to add the ppa to your trusted sources!</li>
<li>Navigate to the alphapept folder and install the package with <code>pip install .</code> (default users) or with <code>pip install -e .</code> to enable developers mode.</li>
<li>Install libgomp.1 with <code>sudo apt-get install libgomp1</code>.</li>
<li>Copy-paste the Bruker library for feature finding to your /usr/lib folder with <code>sudo cp alphapept/ext/bruker/FF/linux64/alphapeptlibtbb.so.2 /usr/lib/libtbb.so.2</code>.</li>
</ol>
<h4 id="Mac">Mac<a class="anchor-link" href="#Mac"> </a></h4><ol>
<li>Install <a href="https://brew.sh">brew</a> and pkg-config: <code>brew install pkg-config</code></li>
<li>Intall Mono from mono-project website <a href="https://www.mono-project.com/download/stable/">Mono Mac</a></li>
<li>Register the Mono-Path to your system:
For macOS Catalina, open the configuration of zsh via the terminal:</li>
</ol>
<ul>
<li>Type in <code>cd</code> to navigate to the home directory.</li>
<li>Type <code>nano ~/.zshrc</code> to open the configuration of the terminal</li>
<li>Add the path to your mono installation: <code>export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:/usr/lib/pkgconfig:/Library/Frameworks/Mono.framework/Versions/6.12.0/lib/pkgconfig:$PKG_CONFIG_PATH</code>. Make sure that the Path matches to your version (Here 6.12.0)</li>
<li>Save everything and execute <code>. ~/.zshrc</code> </li>
</ul>
<ol>
<li>Navigate to the alphapept folder and install the package with <code>pip install .</code> (default users) or with <code>pip install -e .</code> to enable developers mode.</li>
</ol>
<h3 id="Standalone-Windows-Installer">Standalone Windows Installer<a class="anchor-link" href="#Standalone-Windows-Installer"> </a></h3><p>To use AlphaPept as a stand-alone program for end-users, it can be installed on Windows machines via a one-click installer. Download the latest version <a href="http://alphapept.org">here</a>.</p>
<h3 id="Additional-Notes">Additional Notes<a class="anchor-link" href="#Additional-Notes"> </a></h3><blockquote><p>To access Thermo files, we have integrated <a href="https://planetorbitrap.com/rawfilereader">RawFileReader</a> into AlphaPept. We rely on <a href="https://www.mono-project.com/">Mono</a> for Linux/Mac systems.</p>
<p>To access Bruker files, we rely on the <code>timsdata</code>-library. Currently, only Windows is supported. For feature finding, we use the Bruker Feature Finder, which can be found in the <code>ext</code> folder of this repository.</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Version-Performance">Version Performance<a class="anchor-link" href="#Version-Performance"> </a></h2><p>An overview on the performance of different versions can be found <a href="https://charts.mongodb.com/charts-alphapept-itfxv/public/dashboards/5f671dcf-bcd6-4d90-8494-8c7f724b727b">here</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use"> </a></h2><p>AlphaPept is meant to be a framework to implement and test new ideas quickly but also to serve as a performant processing pipeline. In principle, there are three use-cases:</p>
<ul>
<li>GUI: Use the graphical user interface to select settings and process files manually.</li>
<li>CMD: Use the command-line interface to process files. Useful when building automatic pipelines.</li>
<li>Python: Use python modules to build individual workflows. Useful when building customized pipelines and using Python as a scripting language or when implementing new ideas. </li>
</ul>
<h3 id="Windows-Standalone-Installation">Windows Standalone Installation<a class="anchor-link" href="#Windows-Standalone-Installation"> </a></h3><p>For the <a href="https://github.com/MannLabs/alphapept/releases/latest">windows installation</a>, simply click on the shortcut after installation. The windows installation also installs the command-line tool so that you can call alphapept via <code>alphapept</code> in the command line.</p>
<p>{% include image.html width="480," align="center" max-width="480," file="/images/alphapept_cmd.png" %}</p>
<h3 id="Python-Package">Python Package<a class="anchor-link" href="#Python-Package"> </a></h3><p>Once AlphaPept is correctly installed, you can use it like any other python module.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">alphapept.fasta</span> <span class="kn">import</span> <span class="n">get_frag_dict</span><span class="p">,</span> <span class="n">parse</span>
<span class="kn">from</span> <span class="nn">alphapept</span> <span class="kn">import</span> <span class="n">constants</span>

<span class="n">peptide</span> <span class="o">=</span> <span class="s1">&#39;PEPT&#39;</span>

<span class="n">get_frag_dict</span><span class="p">(</span><span class="n">parse</span><span class="p">(</span><span class="n">peptide</span><span class="p">),</span> <span class="n">constants</span><span class="o">.</span><span class="n">mass_dict</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;b1&#39;: 98.06004032687,
 &#39;b2&#39;: 227.10263342686997,
 &#39;b3&#39;: 324.15539728686997,
 &#39;y1&#39;: 120.06551965033,
 &#39;y2&#39;: 217.11828351033,
 &#39;y3&#39;: 346.16087661033}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Using-as-a-tool">Using as a tool<a class="anchor-link" href="#Using-as-a-tool"> </a></h3><p>If alphapept is installed an a conda or virtual environment, launch this environment first.</p>
<p>To launch the command line interface use:</p>
<ul>
<li><code>alphapept</code></li>
</ul>
<p>This allows us to select different modules. To start the GUI use:</p>
<ul>
<li><code>alphapept gui</code></li>
</ul>
<p>Likewise, to start the watcher use:</p>
<ul>
<li><code>alphapept watcher</code><blockquote><p>AlphaPept has a watcher module that continuously monitors a target folder and automatically performs file conversion and feature finding on new files.</p>
</blockquote>
</li>
</ul>
<p>To run a workflow, use:* <code>alphapept workflow your_own_workflow.yaml</code>An example workflow is easily generated by running the GUI once and saving the settings which an be modified on a per-project basis.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Analyzing-an-experiment">Analyzing an experiment<a class="anchor-link" href="#Analyzing-an-experiment"> </a></h2><p>This describes the minimal steps to analyze an experiment.</p>
<h3 id="GUI">GUI<a class="anchor-link" href="#GUI"> </a></h3><ol>
<li>Open the GUI. Drag and drop experimental files and at least one fasta in the <code>Experiment</code> tab. </li>
<li>Default settings are loaded and can be changed or saved in the <code>Settings</code> tab</li>
<li>Navigate to the Run panel and click <code>Start</code></li>
</ol>
<h3 id="Investigating-the-result-files">Investigating the result files<a class="anchor-link" href="#Investigating-the-result-files"> </a></h3><p>The experimental results will be stored in the corresponding *.hdf-files.</p>
<h3 id="CMD-/-Python">CMD / Python<a class="anchor-link" href="#CMD-/-Python"> </a></h3><ol>
<li>Create a settings-file. This can be done by changing the <code>default_settings.yaml</code> in the repository or using the GUI.</li>
<li>Run the analysis with the new settings file. <code>alphapept run new_settings.yaml</code></li>
</ol>
<p>Within Python (i.e., Jupyter notebook) the following code would be required)</p>

<pre><code>from alphapept.settings import load_settings
import alphapept.interface
settings = load_settings('new_settings.yaml')
r = alphapept.interface.run_complete_workflow(settings)</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Notebooks">Notebooks<a class="anchor-link" href="#Notebooks"> </a></h2><p>Within the notebooks, we try to cover most aspects of a proteomics workflow:</p>
<ul>
<li>Settings: General settings to define a workflow</li>
<li>Chem: Chemistry related functions, e.g., for calculating isotope distributions</li>
<li>IO: Everything related to importing and exporting and the file formats used</li>
<li>FASTA: Generating theoretical databases from FASTA files</li>
<li>Feature Finding: How to extract MS1 features for quantification</li>
<li>Search: Comparing theoretical databases to experimental spectra and getting Peptide-Spectrum-Matches (PSMs)</li>
<li>Score: Scoring PSMs</li>
<li>Recalibration: Recalibration of data based on identified peptides</li>
<li>Quantification: Functions for quantification, e.g., LFQ</li>
<li>Matching: Functions for Match-between-runs</li>
<li>Constants: A collection of constants</li>
<li>Interface: Code that generates the command-line-interface (CLI)</li>
<li>Speed: Helper functions to speed up code with CPU / GPU</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Contributing">Contributing<a class="anchor-link" href="#Contributing"> </a></h2><p>If you have a feature request or a bug report, please post it as an issue on the GitHub issue tracker. If you want to contribute, put a PR for it. You can find more guidelines for contributing and how to get started <a href="https://github.com/MannLabs/alphapept/blob/master/CONTRIBUTING.md">here</a>. We will gladly guide you through the codebase and credit you accordingly. Additionally, you can check out the Projects-page on GitHub. You can also contact us via opensource@alphapept.com.</p>

</div>
</div>
</div>
</div>
 

