---

title: Export


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/13_export.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/13_export.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="MaxQuant-output-files">MaxQuant output files<a class="anchor-link" href="#MaxQuant-output-files"> </a></h2><p>Read MaxQuant folder and return the files.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Sequence-Notation">Sequence Notation<a class="anchor-link" href="#Sequence-Notation"> </a></h2><p>Dictionary to be able to convert AlphaPept sequence notaiton to MaxQuant</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_mods" class="doc_header"><code>remove_mods</code><a href="https://github.com/mannlabs/alphapept/tree/master/alphapept/export.py#L21" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_mods</code>(<strong><code>sequence</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ap_to_mq_sequence" class="doc_header"><code>ap_to_mq_sequence</code><a href="https://github.com/mannlabs/alphapept/tree/master/alphapept/export.py#L24" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ap_to_mq_sequence</code>(<strong><code>sequence</code></strong>, <strong><code>mod_translation</code></strong>)</p>
</blockquote>
<p>Converts AlphaPept sequence format to MaxQuant Format
returns naked_sequence, len<em>sequence, modifications</em>, mq_sequence</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="evidence.txt">evidence.txt<a class="anchor-link" href="#evidence.txt"> </a></h2><p>Apparently, the columns for evidence.txt are dynamic. As an example, when including Oxidation of M as modification, the following columns will be added:</p>

<pre><code>'Oxidation (M)',
'Oxidation (M) Probabilities',
'Oxidation (M) Score Diffs',
'Oxidation (M) site IDs'</code></pre>
<p>Example code to load and print the columns</p>

<pre><code>import pandas as pd
evidence = pd.read_csv('F:/TESTDATA/DEFAULT/THERMO_IRT_MANY_MOD/combined/txt/evidence.txt', sep = '\t')
for _ in evidence.columns:
    print(f"mq_dict_evidence['{_}'] =")
`</code></pre>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="prepare_ap_results" class="doc_header"><code>prepare_ap_results</code><a href="https://github.com/mannlabs/alphapept/tree/master/alphapept/export.py#L80" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>prepare_ap_results</code>(<strong><code>ref_ap</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mq_dict_evidence</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Sequence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;naked_sequence&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;n_AA&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Modifications&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mq_modifications&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Modified sequence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mq_sequence&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Missed cleavages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;n_missed&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Proteins&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;protein_group&#39;</span><span class="c1">#it is not entirely clear what the difference between Leading Proteins and Proteins is</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Leading proteins&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;protein_group&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Leading razor protein&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;protein&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;type&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Raw file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mq_rawfile&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;MS/MS m/z&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Charge&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;charge&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;m/z&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mz&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Mass&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mass&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Uncalibrated - Calibrated m/z [ppm]&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Uncalibrated - Calibrated m/z [Da]&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Mass error [ppm]&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Mass error [Da]&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Uncalibrated mass error [ppm]&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Uncalibrated mass error [Da]&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Max intensity m/z 0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Retention time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;rt&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Retention length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Calibrated retention time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Calibrated retention time start&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Calibrated retention time finish&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Retention time calibration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Match time difference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Match m/z difference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Match q-value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Match score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Number of data points&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Number of scans&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Number of isotopic peaks&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;n_isotopes&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;PIF&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Fraction of total spectrum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;matched_int_ratio&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Base peak fraction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;PEP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;MS/MS count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;MS/MS scan number&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;score&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Delta score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Combinatorics&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Intensity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;int_sum&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Reverse&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reverse&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Potential contaminant&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;contaminant&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;id&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Protein group IDs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Peptide ID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Mod. peptide ID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;MS/MS IDs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Best MS/MS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
<span class="n">mq_dict_evidence</span><span class="p">[</span><span class="s1">&#39;Taxonomy IDs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;undefined&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

<pre><code>import pandas as pd

ref_ap = pd.read_csv('E:/test_temp/results.csv')
ref_ap = prepare_ap_results(ref_ap)
mq_evidence = pd.DataFrame.from_dict({k: ref_ap[mq_dict_evidence[k]] for k in mq_dict_evidence.keys()})
mq_evidence.to_csv('mq_evidence.txt', sep = '\t', index=None)</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ProteinGroups">ProteinGroups<a class="anchor-link" href="#ProteinGroups"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

<pre><code>#export 
mq_dict_proteinGroups = {}

mq_dict_proteinGroups['Protein IDs'] =
mq_dict_proteinGroups['Majority protein IDs'] =
mq_dict_proteinGroups['Peptide counts (all)'] =
mq_dict_proteinGroups['Peptide counts (razor+unique)'] =
mq_dict_proteinGroups['Peptide counts (unique)'] =
mq_dict_proteinGroups['Fasta headers'] =
mq_dict_proteinGroups['Number of proteins'] =
mq_dict_proteinGroups['Peptides'] =
mq_dict_proteinGroups['Razor + unique peptides'] =
mq_dict_proteinGroups['Unique peptides'] =
mq_dict_proteinGroups['Sequence coverage [%]'] =
mq_dict_proteinGroups['Unique + razor sequence coverage [%]'] =
mq_dict_proteinGroups['Unique sequence coverage [%]'] =
mq_dict_proteinGroups['Mol. weight [kDa]'] =
mq_dict_proteinGroups['Sequence length'] =
mq_dict_proteinGroups['Sequence lengths'] =
mq_dict_proteinGroups['Q-value'] =
mq_dict_proteinGroups['Score'] =
mq_dict_proteinGroups['Intensity'] =
mq_dict_proteinGroups['MS/MS count'] =
mq_dict_proteinGroups['Only identified by site'] =
mq_dict_proteinGroups['Reverse'] =
mq_dict_proteinGroups['Potential contaminant'] =
mq_dict_proteinGroups['id'] =
mq_dict_proteinGroups['Peptide IDs'] =
mq_dict_proteinGroups['Peptide is razor'] =
mq_dict_proteinGroups['Mod. peptide IDs'] =
mq_dict_proteinGroups['Evidence IDs'] =
mq_dict_proteinGroups['MS/MS IDs'] =
mq_dict_proteinGroups['Best MS/MS'] =
mq_dict_proteinGroups['Oxidation (M) site IDs'] =
mq_dict_proteinGroups['Oxidation (M) site positions'] =
mq_dict_proteinGroups['Taxonomy IDs'] =</code></pre>

</div>
</div>
</div>
</div>
 

